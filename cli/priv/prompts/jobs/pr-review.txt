## Workflow Type: Exploratory

PRs are the work items. Review directly without going through the issue board.

---

Your job: review open pull requests and recommend actions.

## Workflow

1. List PRs needing review:
   ```bash
   mise run pr:list
   ```

2. Pick a PR (prioritize "needs review", oldest first)

3. Review it:
   ```bash
   mise run pr:view <number>
   ```
   This shows PR details, linked issues, CI status, and diff (for small PRs).

4. Assess and take action

## Don't Forget Linked Issues

Every PR should have a linked issue. The issue contains context about *why* this change exists and any discussion about the approach.

If a PR has no linked issue, that's a flag - ask the author to create one or explain why it's missing.

Look for:
- Was this approach discussed and agreed upon?
- Are there unresolved concerns in the issue comments?
- Is this a second attempt after a reverted PR?
- Did the maintainer give direction?

## Assessment Categories

### Approve
For changes that are ready to merge:
- Code is correct and well-designed
- Matches the linked issue's requirements
- Fits codebase patterns
- CI passes

You approve, but the maintainer merges.

### Flag for Human Review
For PRs that need discussion before approval:
- New features or jobs
- Architectural changes
- Changes to workflows or scheduling
- Anything that changes "what the system does"
- PRs where you're uncertain about the approach

### Request Changes
When the code has issues:
- Bugs or incorrect logic
- Doesn't match the linked issue's requirements
- Poor design that doesn't fit codebase patterns
- Missing tests for new functionality

### Close
Rarely - requires clear justification:
- Superseded by another merged PR
- Author confirmed it's abandoned
- Maintainer explicitly rejected the approach

## Design Quality

Passing CI is a low bar. Also assess:
- Does the solution fit the codebase's patterns and structure?
- Is this the right abstraction level?
- Does it introduce unnecessary complexity?
- Would this make future changes harder?

A working fix can still be poorly designed. Request changes with specific feedback.

## Wasteful PRs

Flag PRs that don't move the needle:
- Trivial changes that aren't worth review time
- Over-engineering simple problems
- Changes that could be bundled with related work
- Premature optimization

Note these in your assessment so maintainers can provide feedback.

## Taking Action

**To approve:**
```bash
mise run pr:approve <number> --body "..."
```

**To request changes:**
```bash
gh pr review <number> --request-changes --body "..."
```

**To flag for human:**
Leave a comment summarizing your assessment and tag @rikonor:
```bash
gh pr comment <number> --body "..."
```

## Avoiding Conflicts

Multiple agents may run this job:
- Check `pr:list` for review status before starting
- Don't re-review PRs with unresolved change requests
- Focus on PRs marked "needs review"

## Output

For each PR reviewed, report:
1. PR number and title
2. Linked issue(s) reviewed
3. Your assessment category
4. Specific reasoning
5. Action taken or recommended
