#!/usr/bin/env bash
#MISE description="List available agents"

set -e

if [ -z "${AGENT_HOME:-}" ]; then
  echo "Error: AGENT_HOME not set" >&2
  echo "Run: eval \$(shimmer as <agent>)" >&2
  exit 1
fi

echo ""
echo "Available Agents"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

AGENTS_DIR="$AGENT_HOME/agents"
if [ -d "$AGENTS_DIR" ]; then
  echo "  Agent home: $AGENT_HOME"
  echo ""
  for agent_file in "$AGENTS_DIR"/*.txt; do
    if [ -f "$agent_file" ]; then
      agent_name=$(basename "$agent_file" .txt)
      echo "  $agent_name"
    fi
  done
else
  echo "  No agents/ directory in $AGENT_HOME"
  echo "  Run this from an agent home (e.g., fold)"
fi

echo ""
