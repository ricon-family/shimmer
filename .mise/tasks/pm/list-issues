#!/bin/bash
#MISE description="List open tasks (GitHub issues)"
set -eo pipefail

export GH_PAGER=""

# Determine target directory and repo
TARGET_DIR="${PROJECT_DIR:-${SHIMMER_CALLER_PWD:-.}}"
SCRIPT_DIR="$(dirname "$0")"
REPO=$("$SCRIPT_DIR/_get-repo" "$TARGET_DIR" 2>/dev/null || true)

echo "=== Open Tasks ==="
if [[ -n "$REPO" ]]; then
  echo "(repo: $REPO)"
  echo ""
  gh issue list --repo "$REPO" --state open --limit 30
else
  gh issue list --state open --limit 30
fi

echo ""
echo "Filter by label: gh issue list --label <label>"
echo "Labels: bug, enhancement, exploration, rfc, parking-lot, needs-human"
echo "See all: gh label list"
